
[[_getviewtokenbyfileidusingget]]
==== 获取ViewToken
....
GET /view/token
....


===== 说明
通过compareId,fileId,integrateId获取ViewToken,然后把viewToken传入JavaScript组件提供的接口中，即可显示工程文件。注：只有在转换或集成任务成功以后，才能获取viewToken，有效期为12小时


===== 参数

[options="header", cols=".^2a,.^3a,.^9a,.^4a,.^2a"]
|===
|类型|名称|说明|类型|默认值
|*Header*|*Authorization* +
_必填_|authorization header|string|`"bearer dc671840-bacc-4dc5-a134-97c1918d664b"`
|*Query*|*compareId* +
_必填_（integrateId,fileId三选一）|通过模型对比ID获取ViewToken|integer (int64)|
|*Query*|*fileId* +
_必填_（integrateId,compareId三选一）|通过单文件模型ID获取ViewToken|integer (int64)|
|*Query*|*integrateId* +
_必填_（integrateId,compareId三选一）|通过集成模型ID获取ViewToken|integer (int64)|
|===


===== HTTP请求示例

====== 请求 path
----
/view/token?compareId=0
/view/token?integrateId=0
/view/token?fileId=0
----
===== Request Body
无
[source,json]
----
curl -X GET
-H "Authorization: bearer <your accessToken>"
-H "Content-Type: application/json"
"https://api.bimface.com/view/token?fileId=<your fileId>"

curl -X GET
-H "Authorization: bearer <your accessToken>"
-H "Content-Type: application/json"
"https://api.bimface.com/view/token?integrateId=<your integrateId>"

curl -X GET
-H "Authorization: bearer <your accessToken>"
-H "Content-Type: application/json"
"https://api.bimface.com/view/token?compareId=<your compareId>"
----

====== 请求 header
[source,json]
----
"string"
----


===== 响应

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP代码|说明|类型
|*200*|OK|<<_7566474039fac907ea0573a8f68797fd,GeneralResponse«string»>>
|*401*|Unauthorized|无内容
|*403*|Forbidden|无内容
|*404*|Not Found|无内容
|===
===== HTTP响应示例

====== 响应 200
[source,json]
----
{
    "code": "success",
    "message": null,
    "data": "5e0d0ed0d33a4d49982dec2b85f93bdf"
}
----
include::detail/viewToken_datadec.adoc[]
include::detail/fail.adoc[]
include::detail/viewToken_errorcode.adoc[]
